function getRndInt(min, max) { //9.3 추가    return Math.floor(Math.random() * (max - min + 1)) + min;}var break_page = 0;var break_time = 0;function breakClose() {    mediaPlay();    $(".break-container").css("visibility", "hidden");}function breakOpen() {    mediaPause();    $(".break-container").css("visibility", "visible");    setBtn("#break_close", 'breakClose()', "돌발상자 닫기");}function debugKey(event) {    var x = event.which || event.keyCode;    console.info(x)    if (x == 55) {        breakOpen()    }    if (x == 32) {        if ($(".break-container").css("visibility") == "hidden") {			if (current_page)            if (media_content.paused) {                mediaPlay();                var i;                for (i in syncObj) {                    $("#" + syncObj[i].att_id).hide();                }            } else {                mediaPause();            }        }    }}/*document.addEventListener("keydown", debugKey);*///alert("last_page_  :  " + last_page_);//11일 추가function queryString(parameter) {    var loc = location.search.substring(1, location.search.length);    var param_value = false;    var params = loc.split("&");    for (i = 0; i < params.length; i++) {        param_name = params[i].substring(0, params[i].indexOf('='));        if (param_name == parameter) {            param_value = params[i].substring(params[i].indexOf('=') + 1)        }    }    if (param_value) {        return param_value;    } else {        return false;    }}var lmsIs = 1;//if (location.ancestorOrigins[0] == undefined || location.ancestorOrigins[0] == "undefined") { //lms 접속이 아닌경우//    lmsIs = 0;//} else {//    lmsIs = 1;//};//console.info("lmsIs : " + lmsIs)//var progressStrObj = [];if (queryString("progress") == false) {    var menu_t_no = courseObj.menu.length - 1;    var menu_chap_t_no = courseObj.menu[menu_t_no].sub_menu.length - 1;    var this_t_no = Number(courseObj.menu[menu_t_no].sub_menu[menu_chap_t_no].split("^")[1]) + 1;    for (i = 0; i < this_t_no; i++) {        progressStrObj[i] = "true";    }} else {    progressStrObj = queryString("progress").split(",");}var last_page_ = 1;var slider, vslider, get_slider, get_vslider;var total_page;var current_page = 1;for (i = 0; i < progressStrObj.length; i++) {    if (progressStrObj[i] === "false") {        last_page_ = i + 1;        break;    }}function mLAddHref() {    $(".break-container").css("visibility", "hidden");    var course_hrefObj = courseObj.href; //데이    var course_menuObj = courseObj.menu[1].sub_menu;    var org_length = Object.keys(course_hrefObj).length - 1;    var add_length = Object.keys(course_menuObj).length - 1;    var eq_length = org_length + add_length;    var ra_str = courseObj.week_course_num;    var i = 0;    var i_in;    var add_st_num = null;    var memuObj = courseObj.menu;    var u_progress_str = "";    var seq_num = 1;    var end_page_stand_num = 0;    var ox_page_num = 0;    if (ra_str == "1") {        end_page_stand_num = 3;    }    if (ra_str == "2") {        end_page_stand_num = 4;    }    break_page = getRndInt(4, 4 + add_length);    break_time = getRndInt(-90, +90);    console.info("break_page : " + break_page + " break_time : " + break_time);    if (add_length > 0) {        for (i = 1; i <= org_length; i++) {            var i_url = String(courseObj.href[i].url);            if (i_url.indexOf("mainlearning") != -1) {                add_st_num = i            }        }        for (i = eq_length; i > add_st_num + 1; i--) {            courseObj.href[i] = new Object();            courseObj.href[i].url = courseObj.href[i - add_length].url;            courseObj.href[i].meta = courseObj.href[i - add_length].meta;            courseObj.href[i].media = courseObj.href[i - add_length].media;            courseObj.href[i].paser = courseObj.href[i - add_length].paser;        }        for (i = add_st_num; i < eq_length - end_page_stand_num; i++) {            courseObj.href[i].url = courseObj.href[add_st_num].url;            courseObj.href[i].meta = courseObj.href[add_st_num].meta;            courseObj.href[i].paser = courseObj.href[add_st_num].paser;            courseObj.href[i].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num) + ".mp4";            seq_num++;        }        for (i = add_st_num; i < eq_length; i++) {            if (course_hrefObj[i].url.indexOf("reduce") != -1) {                courseObj.href[i].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num) + ".mp4";            }        }    } else if (add_length == 1) {        courseObj.href[end_page_stand_num + 1].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num) + ".mp4";        courseObj.href[end_page_stand_num + 3].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num + 1) + ".mp4";    } else {        courseObj.href[end_page_stand_num + 1].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num) + ".mp4";        courseObj.href[end_page_stand_num + 3].media = "../../../2019_vod/" + courseObj.course_num + "/04_mp4/" + courseObj.week_num + "_" + courseObj.week_course_num + "_" + (seq_num + 1) + ".mp4";    }    //if (progressStr!=) {    //  window.parent.postMessage({ progress_: "" }, '*');    // }    //console.info("progressStr : " + progressStr)    for (i = 0; i < eq_length; i++) {        systemObj.u_progress[i] = 0;    }    console.log(courseObj.href);}mLAddHref();function itostr(inum) {    return (inum < 10 ? ("0" + inum) : (inum));}function sectomin(inum) {    return itostr(Math.floor(inum / 60));};function sectorema(inum) {    return itostr(Math.floor(inum % 60));}function sectotime(inum) {    var inum_str = sectomin(inum) + ":" + sectorema(inum);    var inum_re;    if (inum_str != "NaN:NaN" && inum_str != undefined) {        inum_re = sectomin(inum) + ":" + sectorema(inum);    } else {        inum_re = "00:00";    }    return inum_re;};function setVol(value) {    media_content.volume = value;}/***********************************************************/var first_load = true;function checkProgress() {    var checkProgObj = systemObj.u_progress    var i = 0;    var temp_progress = "";    for (i in checkProgObj) {        if (progressStrObj != "") {            if (progressStrObj[i] == "true") {                temp_progress += 1 + ","                systemObj.u_progress[i] = 1;                //$("#progress_icon_" + i).show()            } else {                temp_progress += 0 + ","                systemObj.u_progress[i] = 0;                $("#progress_icon_" + i).hide()            }        } else {            temp_progress += checkProgObj[i] + ","        }    }    $("#progress_info").val(temp_progress)        // current_page = lastPage();}function passProgress() {    var checkProgObj = systemObj.u_progress    var i = 0;    var temp_progress = "";    for (i in checkProgObj) {        checkProgObj[i] = 1;    }    checkProgress();}//====================////진도에 맞게 시작페이지 이동function lastPage() {    var i;    var progressObj = systemObj.u_progress;    var temp_page = Object.keys(progressObj).length;    var return_value = 1;    total_page = temp_page;    var debug_value = "";    for (i in progressObj) {        debug_value = debug_value + progressObj[i] + ",";        if (progressObj[i] == 1) {            return_value = Number(i) + 1;        }    }    if (return_value == 0) {        return_value = 1;    }    return return_value;}current_page = last_page_;total_page = progressStrObj.length;//*********************************************************//function loadTemplet() {    var bottom_con = $(".control-container");    var menu_con = $(".menu-container");    var title_con = $(".title-container");    contentLoad(current_page);    bottom_con.load(courseObj.control_url + " .control-container", function(responseTxt, statusTxt, xhr) {        if (statusTxt === "success") {            setControlBtn();        }        if (statusTxt === "error") {}    });    menu_con.load(courseObj.menu_url + " .menu-container", function(responseTxt, statusTxt, xhr) {        if (statusTxt === "success") {            setMenu();        }    });    title_con.load(courseObj.title_url + " .title-container", function(responseTxt, statusTxt, xhr) {        if (statusTxt === "success") {            setTitle();        }    });}var syncIs, syncObj;function contentLoad(cp_value) {    $(".break-container").css("visibility", "hidden");    var content_con = $(".contents-container-01");    var syncObj_name;    hideMenu();    syncIs = null;    syncObj = null;    content_con.load(courseObj.href[cp_value].url + " .contents-container-01", function(responseTxt, statusTxt, xhr) {        if (statusTxt === "success") {            $("#next_msg_layer").hide();            $(".rubric-layer").fadeIn();            $(".current-page").text(itostr(current_page));            $(".duration-page").text(itostr(total_page));            syncObj_name = courseObj.href[cp_value].paser.split("P()")[0] + "_data";            syncObj = courseObj[syncObj_name]            eval(courseObj.href[cp_value].paser);            // $(".contents-container-01 .contents-container-01").hide();            checkProgress() //============================================================            var content_con = $(".contents-container-02");            content_con.load(courseObj.href[cp_value].url + " .contents-container-02", function(responseTxt, statusTxt, xhr) {                if (statusTxt === "success") {}            });        }    });}function setControlBtn() {    //setBtn("#index_open_btn", '$(".menu-container").toggle()', "메뉴 버튼");    setBtn("#f_professor", 'popIntroduce()', "교수약력");    setBtn("#f_map", 'popMap()', "학습맵");    setBtn("#f_guide", 'popGuide()', "학습가이드");    setBtn("#f_down", 'downloadPDF()', "교안다운로드");    setBtn("#media_play_btn", 'mediaPlay()', "Play 버튼");    setBtn("#media_pause_btn", 'mediaPause()', "Pause 버튼");    setBtn("#media_replay_btn", 'mediaReplay()', "Replay 버튼");    setBtn("#prev_btn", 'prevProg()', "이전 버튼");    setBtn("#next_btn", 'nextProg()', "다음 버튼");    setBtn("#speed_slow_btn", 'mediaSpeed(0.5)', "0.5배속버튼");    setBtn("#speed_base_btn", 'mediaSpeed(1)', "1배속버튼");    setBtn("#speed_fast_btn", 'mediaSpeed(2)', "2배속버튼");    setBtn("#media_script_btn", '$("#script_layer").fadeToggle()', "스크립트");    setBtn("#media_volume_btn", 'soundOff()', "사운드 끄기");    setBtn("#set_btn_on", 'setBtnProcess()', "설정 켜기");    setBtn("#set_btn_off", 'setBtnProcess()', "설정 끄기");    $(".current-page").text(itostr(current_page));    $(".duration-page").text(itostr(total_page));    //script_layer    setBtn("#pass_prog_btn", 'passProgress()', "지원이짱");}function setTitle() {    $("title").html(courseObj.course_title + " / " + courseObj.course_name);    $("#week_num").text(courseObj.week_num + "주");    $("#week_course_num").text(courseObj.week_course_num + "차");    $("#course_title").text(courseObj.course_title + "");    $("#course_name").text(courseObj.course_name + "");}function prevProg() {    if (current_page <= 1) {        alert("첫 페이지 입니다.");    } else {        gotoPage(current_page, -1);    }}function nextProg() {    if (current_page >= total_page) {        alert("마지막 페이지 입니다.");    } else {        gotoPage(current_page, 1);    }}//*********************메뉴*********************************//function setMenu() {    var i, j, k = "";    var x = 0;    var memuObj = courseObj.menu;    for (i in memuObj) {        $(".menu-list").append('<ul><a href="#" class="depth-1" id="menu_id_' + i + '" >' + memuObj[i].main_menu.split("^")[0] + '</a></ul>');        setBtn("#menu_id_" + i, "menuGotoPage(" + i + ")", memuObj[i].main_menu.split("^")[0]);        for (j in memuObj[i].sub_menu) {            $("#menu_id_" + i).append('<ul ><a  href="#" class="depth-2" id="menu_id_' + i + '_' + j + '" >' + memuObj[i].sub_menu[j].split("^")[0] + '<i id = "progress_icon_' + x + '" style="float: left" class="far fa-calendar-check">   </i></a></ul>');            setBtn("#menu_id_" + i + "_" + j, "menuGotoPage(" + i + "," + j + ")", memuObj[i].sub_menu[j].split("^")[0]);            x++;        }    }    $(".temp_sample").css("display", "none");    setBtn("#menu_close_btn", 'hideMenu()', "메뉴 닫기");    setBtn(".index-btn", 'showMenu()', "메뉴 열기");}function showMenu() {    $(".index-btn").css({        "background-image": 'url("../common_img/index/index.png")'    })    setBtn(".index-btn", 'hideMenu()', "메뉴 닫기");    $(".menu-container").animate({        left: '0'    });}function hideMenu() {    $(".index-btn").css({        "background-image": 'url("../common_img/index/index.png")'    })    setBtn(".index-btn", 'showMenu()', "메뉴 열기");    $(".menu-container").animate({        left: '-140px'    });}//*********************메뉴끝******************************//var temp_sound_vol = 0;function soundOff() {    if (media_content.volume != 0) {        temp_sound_vol = media_content.volume;    }    media_content.volume = 0;    $("#media_volume_btn").css({        "background-image": 'url(../common_img/index/sound_off.png)'    })    $("#media_volume_btn").hover(function() {        $(this).css("background-color", 'url(../common_img/index/sound_off.png)');    });    setBtn("#media_volume_btn", 'soundOn()', "사운드 켜기");    $(".volume-bar").val(0);}function soundOn() {    media_content.volume = temp_sound_vol;    $("#media_volume_btn").css({        "background-image": 'url(../common_img/index/sound.png)'    })    $("#media_volume_btn").hover(function() {        $(this).css("background-color", 'url(../common_img/index/sound_ov.png)');    });    setBtn("#media_volume_btn", 'soundOff()', "사운드 끄기");    $(".volume-bar").val(temp_sound_vol * 100);}/*********************************************************/function setBtn(jq_name, func_name, tool_tip) {    $("" + jq_name).unbind("click");    $("" + jq_name).click(function() {        eval("" + func_name);    })    $("" + jq_name).css("cursor", "pointer");    $("" + jq_name).attr("title", '"' + tool_tip + '"입니다.');}var menuD_click_check = true;function menuGotoPage(dep_1, dep_2) {    if (menuD_click_check) {        var menuGoObj, menuGonum;        if (dep_2 == undefined) {            menuGoObj = courseObj.menu[dep_1].sub_menu[0];        } else {            menuGoObj = courseObj.menu[dep_1].sub_menu[dep_2];        }        gotoPage(Number(menuGoObj.split("^")[1]), 0);    }    menuD_click_check = false;    $("a").hover(function() {        menuD_click_check = true;    }, function() {        menuD_click_check = true;    });}function gotoPage(page_value, move_value) {    var log_Data = "-현재 페이지 : " + systemObj.u_progress[current_page - 1] + "  -이동 페이지 : " + systemObj.u_progress[(page_value - 1) + move_value] + "  -이동 이전 페이지 : " + systemObj.u_progress[(page_value - 2) + move_value];    //console.log(log_Data);    // window.parent.postMessage({ page_n_: "" + current_page }, '*');    if (move_value == 0) { //메뉴 이동시        if (systemObj.u_progress[(page_value - 1) + move_value] == 1 || systemObj.u_progress[(page_value - 2) + move_value]) {            //current_page = current_page + move_value;            //systemObj.u_progress[current_page - 1] = 1;            current_page = page_value;            //  alert(page_value)            contentLoad(page_value);            mediaLoad(page_value);        } else {            alert("이전 페이지 중 학습이 종료되지 않은 페이지가 존재합니다.\n순차학습 완료 후 이동해 주세요.")        }    } else { //백넥스트 이동시        if ($("#next_msg_layer").css("display") == "block" || systemObj.u_progress[page_value - 1] == 1 || systemObj.u_progress[(page_value - 1) + move_value] == 1 || systemObj.u_progress[(page_value - 2) + move_value]) {            current_page = current_page + move_value;            systemObj.u_progress[current_page - 1] = 1;            contentLoad(current_page);            mediaLoad(current_page);        } else {            alert("현재 페이지의 학습이 종료되지 않았습니다.\n학습 완료 후 이동해 주세요.")        }    }    $(".current-page").text(itostr(current_page));    $(".duration-page").text(itostr(total_page));}function opinionWrite(op_textarea_02) {    console.info(op_textarea_02)    var user_opinion = $("#" + op_textarea_02).val();    if (user_opinion.length < 20) {        alert("20자 이상 작성해주세요.");    } else {        systemObj.cpage_check = false;        if (op_textarea_02 == "bl_D_textarea_01") { //사전학습  다른사람의견보기            $("#bl_D_btn_01").hide();            $("#bl_D_btn_02").show();        }        if (op_textarea_02 == "op_textarea_02") { //생각나누기 다른사람의견보기            $("#op_btn_01").hide();            $("#op_btn_02").show();        }        endCheck();        window.parent.postMessage({ opinion_: user_opinion }, '*');    }    console.info(courseObj.course_num + "_" + itostr(courseObj.week_num) + itostr(courseObj.week_course_num) + itostr(current_page) + "\n user_text : " + user_opinion);};function opinionReturn() {    window.parent.postMessage({ opinion_return_: "" }, '*');};//-------------------------function bltextReturn() {    window.parent.postMessage({ bltext_return_: "" }, '*');};//-----------------var e_data_check = true;var temp_quiz_data = new Object();window.addEventListener('message', function(e) {    if (page_index_ == "qu_04" && e_data_check) {        e_data_check = false;        temp_quiz_data = JSON.parse(e.data);        quiz_Json.quiz_item_04[1].quiz_title = temp_quiz_data[0].QuestionTitle;        quiz_Json.quiz_item_04[1].example_01 = temp_quiz_data[0].ItemTitle1;        quiz_Json.quiz_item_04[1].example_02 = temp_quiz_data[0].ItemTitle2;        quiz_Json.quiz_item_04[1].example_03 = temp_quiz_data[0].ItemTitle3;        quiz_Json.quiz_item_04[1].example_04 = temp_quiz_data[0].ItemTitle4;        quiz_Json.quiz_item_04[1].correct_num = temp_quiz_data[0].OrderNo;        quiz_Json.quiz_item_04[1].explain_data = temp_quiz_data[0].AnswerDesc;        quiz_Json.quiz_item_04[1].user_select = temp_quiz_data[0].IsAnswer;        quiz_Json.quiz_item_04[2].quiz_title = temp_quiz_data[1].QuestionTitle;        quiz_Json.quiz_item_04[2].example_01 = temp_quiz_data[1].ItemTitle1;        quiz_Json.quiz_item_04[2].example_02 = temp_quiz_data[1].ItemTitle2;        quiz_Json.quiz_item_04[2].example_03 = temp_quiz_data[1].ItemTitle3;        quiz_Json.quiz_item_04[2].example_04 = temp_quiz_data[1].ItemTitle4;        quiz_Json.quiz_item_04[2].correct_num = temp_quiz_data[1].OrderNo;        quiz_Json.quiz_item_04[2].explain_data = temp_quiz_data[1].AnswerDesc;        quiz_Json.quiz_item_04[2].user_select = temp_quiz_data[1].IsAnswer;        quiz_Json.quiz_item_04[3].quiz_title = temp_quiz_data[2].QuestionTitle;        quiz_Json.quiz_item_04[3].example_01 = temp_quiz_data[2].ItemTitle1;        quiz_Json.quiz_item_04[3].example_02 = temp_quiz_data[2].ItemTitle2;        quiz_Json.quiz_item_04[3].example_03 = temp_quiz_data[2].ItemTitle3;        quiz_Json.quiz_item_04[3].example_04 = temp_quiz_data[2].ItemTitle4;        quiz_Json.quiz_item_04[3].correct_num = temp_quiz_data[2].OrderNo;        quiz_Json.quiz_item_04[3].explain_data = temp_quiz_data[2].AnswerDesc;        quiz_Json.quiz_item_04[3].user_select = temp_quiz_data[2].IsAnswer;        ///    }    if (page_index_ == "opinion") {        if (e.data.length < 1) {            $("#op_textarea_01").val("의견을 입력해주세요.");        } else {            console.info(e.data.split("|"));            $("#op_textarea_01").val(e.data.split("|")[0]);            if (e.data.split("|")[1].length > 1) {                $("#op_textarea_02").val(e.data.split("|")[1]);            }        }    }    if (page_index_ == "bl") {        if (e.data.length < 1) {            //	$("#bl_D_textarea_01").val("의견을 입력해주세요.");        } else {            $("#bl_D_textarea_01").val(e.data.split("|")[0]);        }    }});function opinionList() {    window.parent.postMessage({ opinionList_: "" }, '*');    console.info(courseObj.course_num + "_" + itostr(courseObj.week_num) + itostr(courseObj.week_course_num) + itostr(current_page));};function getblOpinion() {    console.info("getblOpinion" + courseObj.course_num + "_" + itostr(courseObj.week_num) + itostr(courseObj.week_course_num) + itostr(2));    $("#op_textarea_01").val("getblOpinion" + courseObj.course_num + "_" + itostr(courseObj.week_num) + itostr(courseObj.week_course_num) + itostr(2));}/*********************************************************//*****180829 팝업(교수약력, 교안다운로드, 러닝맵, 학습가이드) START*******/function popGuide() {    var param_value = courseObj.course_num;    window.open("../../etc/guide.htm?course_num=" + param_value, "_blank", "toolbar=no, location=no, directories=no, status=no, menubar=yes, scrollbars=no, resizable=no, copyhistory=yes, width=850, height=550");}function popIntroduce() {    var param_value = courseObj.course_num;    window.open("../../etc/introduce.htm?course_num=" + param_value, "_blank", "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=yes, width=650, height=420");}function popMap() {    var param_value = courseObj.course_num;    window.open("../../etc/map.htm?course_num=" + param_value, "_blank", "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=yes, width=800, height=700");}function downloadPDF() {    var downloadPath = '../../download/' + courseObj.course_num + '/pdf/' + courseObj.course_num + '_' + courseObj.week_num + '_' + courseObj.week_course_num + '.pdf';    window.open(downloadPath, '_blank');}function downloadMP3() {    var downloadPath = '../../download/' + courseObj.course_num + '/mp3/' + courseObj.course_num + '_' + courseObj.week_num + '_' + courseObj.week_course_num + '.zip';    window.open(downloadPath, '_blank');}/*****180829 팝업(교수약력, 교안다운로드, 러닝맵, 학습가이드) END*******///======================================================//